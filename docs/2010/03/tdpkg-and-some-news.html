<!doctype html>































<html
  class="not-ready lg:text-base"
  style="--bg: #faf8f1"
  lang="en-us"
  dir="ltr"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Tdpkg troubleshooting and some news - Luca Bruno blog</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Hello,
lately I&rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache." />
  <meta name="author" content="Luca Bruno blog" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://lucabrun.github.io/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="https://lucabrun.github.io/theme.png" />

  
  
  
  
  

  
  
  

  
  
  <script
    defer
    src="https://lucabrun.github.io/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="https://lucabrun.github.io/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="https://lucabrun.github.io/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.125.2">

  
  
  
  
  


  
  
  <meta itemprop="name" content="Tdpkg troubleshooting and some news">
  <meta itemprop="description" content="Hello,
lately I&rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.">
  <meta itemprop="datePublished" content="2010-03-16T13:05:00-07:00">
  <meta itemprop="dateModified" content="2010-03-16T13:05:00-07:00">
  <meta itemprop="wordCount" content="267">
  <meta itemprop="keywords" content="Dpkg,Aptitude,Tdpkg,Debian">
  
  <meta property="og:url" content="https://lucabrun.github.io/2010/03/tdpkg-and-some-news.html">
  <meta property="og:site_name" content="Luca Bruno blog">
  <meta property="og:title" content="Tdpkg troubleshooting and some news">
  <meta property="og:description" content="Hello,
lately I&amp;rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&amp;hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&amp;rsquo;s not working here (Ubuntu, other distro&amp;hellip;), doesn&amp;rsquo;t create the cache.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
  <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2010-03-16T13:05:00-07:00">
    <meta property="article:modified_time" content="2010-03-16T13:05:00-07:00">
    <meta property="article:tag" content="Dpkg">
    <meta property="article:tag" content="Aptitude">
    <meta property="article:tag" content="Tdpkg">
    <meta property="article:tag" content="Debian">

  
  <meta name="twitter:card" content="summary"><meta name="twitter:title" content="Tdpkg troubleshooting and some news">
<meta name="twitter:description" content="Hello,
lately I&rsquo;ve received some feedback, thanks for this.
Is it compatible with apt? Can I use dpkg back again after using tdpkg?
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.
It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.">

  
  

  
  <link rel="canonical" href="https://lucabrun.github.io/2010/03/tdpkg-and-some-news.html" />
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="https://lucabrun.github.io/"
      >Luca Bruno blog</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">Tdpkg troubleshooting and some news</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>Mar 16, 2010</time>
      
      
      
      
    </div>
    
  </header>

  <section><p>Hello,<br>
lately I&rsquo;ve received some feedback, thanks for this.</p>
<ol>
<li>
<p>Is it compatible with apt? Can I use dpkg back again after using tdpkg?<br>
The answer is&hellip; yes! You can use what you want in the order you want, and use tdpkg when you want. Take in consideration that after using dpkg (or apt) without tdpkg, then you use tdpkg the cache will be rebuilt for consistency.</p>
</li>
<li>
<p>It&rsquo;s not working here (Ubuntu, other distro&hellip;), doesn&rsquo;t create the cache.<br>
First of all you have to be root when first running tdpkg in order to create the cache. If this didn&rsquo;t solve the problem you are maybe using an untested platform. Debian uses eglibc and tdpkg has been tested on i386 and amd64. Since tdpkg does wrapping around glibc calls it might happen to not wrap the right functions. If you want tdpkg to be ported to your platform please comment here with the result of these commands:<br>
objdump -T /usr/bin/dpkg|grep open<br>
objdump -T /usr/bin/dpkg|grep stat<br>
objdump -T libtdpkg.so|grep open<br>
objdump -T libtdpkg.so|grep stat</p>
</li>
<li>
<p>Should I put the alias also for apt-get and aptitude?<br>
Yes you have to. Aptitude and apt-get bypass the shell so the only alias for dpkg won&rsquo;t work.</p>
</li>
</ol>
<p>Another thing I&rsquo;d like to say is that dpkg/experimental has a patch that speeds up a lot database reading by asking the kernel to cache .list files&hellip; i.e. dpkg will avoid cold start. This brings timing from 14 seconds to about 3 seconds! At all, using tokyocabinet you get 1 second. Think that including a cache inside dpkg would mean even less than 1 second.</p>
<p>Have fun&hellip; :)</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://lucabrun.github.io/tags/dpkg"
      >dpkg</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://lucabrun.github.io/tags/aptitude"
      >aptitude</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://lucabrun.github.io/tags/tdpkg"
      >tdpkg</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="https://lucabrun.github.io/tags/debian"
      >debian</a
    >
    
  </footer>
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  >
    
    <a class="ltr:pr-3 rtl:pl-3" href="https://lucabrun.github.io/2010/04/valagtkdoc-10.html"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Valagtkdoc 1.0</span></a
    >
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="https://lucabrun.github.io/2010/03/tdpkg-speed-up-reading-dpkg-database.html"
      ><span>Tdpkg 1.0 - speed up reading dpkg database</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    &copy; 2024
    <a class="link" href="https://lucabrun.github.io/">Luca Bruno blog</a>
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
